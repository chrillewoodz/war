<div class="session-wrapper">

  <timer [total]="timePerRound" [timer$]="timer$" (ranOut)="endTurn()"></timer>

  <div class="game-hud">
    <players [session]="session" [players]="players" [self]="self"></players>
    <!-- TODO: Set active areas -->
    <area-information [areas]="session?.state.areas" [activeAreas]="[]"></area-information>
    <game-logger [player]="self" [session]="session" (onNewLog)="updateState($event)"></game-logger>
  </div>

  <div class="map-container" [ngSwitch]="mapType" areaHandler>
    <map-europe #mapInstance *ngSwitchCase="'europe'" (mapReady)="onMapReady($event)"></map-europe>
    <area-popup [areas]="areas" [activeAreas]="activeAreas"></area-popup>
  </div>

  <div class="screens">
    <screen-fight *ngIf="isFightActive" [info]="currentFight" (completed)="fightCompleted($event)"></screen-fight>
  </div>

  <footer class="bottom-bar">
    <div class="right-bar">
      <action-points [config]="config"></action-points>
      <game-stats [stats]="stats"></game-stats>
    </div>
    <game-cards [cards]="cards"></game-cards>
    <game-settings></game-settings>
  </footer>

</div>